<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat - KS Matrimony</title>
    <!-- Link to the NEW chat-specific CSS -->
    <link rel="stylesheet" href="./assets/css/chat.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>

    <!-- Reusing the main header -->
    <header class="main-header">
        <div class="header-content">
            <a href="./dashboard.html" class="logo">KS Matrimony</a>
            <nav class="main-nav">
                <a href="./dashboard.html" class="nav-link">Dashboard</a>
                <a href="#" class="nav-link">Matches</a>
                <a href="#" class="nav-link active">Messages</a>
                <a href="#" class="nav-link">Search</a>
            </nav>
            <!-- Replace the old <div class="user-actions">...</div> with this in ALL 5 files -->
            <div class="user-actions">
                <button class="icon-btn"><i class='bx bxs-bell'></i><span class="notification-dot"></span></button>
                
                <!-- New Dropdown Structure -->
                <div class="profile-dropdown">
                    <div class="profile-summary-clickable">
                        <img src="./assets/images/profile-placeholder.jpg" alt="User Profile" class="profile-pic">
                        <span class="profile-name">Loading...</span>
                        <i class='bx bx-chevron-down'></i>
                    </div>
                    <div class="dropdown-menu">
                        <a href="edit-profile.html" class="dropdown-item">
                            <i class='bx bxs-user-circle'></i> Edit Profile
                        </a>
                        <a href="#" id="logout-link" class="dropdown-item">
                            <i class='bx bxs-log-out'></i> Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="chat-container">

        <!-- ===== Column 1: Conversations List ===== -->
        <aside class="conversations-sidebar">
            <div class="sidebar-header">
                <h3>Your Matches</h3>
                <div class="search-box">
                    <i class='bx bx-search'></i>
                    <input type="text" placeholder="Search matches...">
                </div>
            </div>
            <div class="conversations-list">
                <!-- Active Conversation -->
                <div class="conversation-item active">
                    <img src="./assets/images/profile2.jpg" alt="Priya Sharma">
                    <div class="conversation-details">
                        <div class="conversation-header">
                            <span class="name">Priya Sharma</span>
                            <span class="time">10:42 AM</span>
                        </div>
                        <div class="conversation-snippet">
                            <p class="last-message">Sounds great! Looking forward to it.</p>
                            <span class="unread-count">1</span>
                        </div>
                    </div>
                </div>

                <!-- Another Conversation -->
                <div class="conversation-item">
                    <img src="./assets/images/profile3.jpg" alt="Anjali Mehta">
                    <div class="conversation-details">
                        <div class="conversation-header">
                            <span class="name">Anjali Mehta</span>
                            <span class="time">Yesterday</span>
                        </div>
                        <div class="conversation-snippet">
                             <p class="last-message">You: Yes, I love hiking as well!</p>
                        </div>
                    </div>
                </div>

                 <!-- Yet Another Conversation -->
                <div class="conversation-item">
                    <img src="./assets/images/profile4.jpg" alt="Rohan Verma">
                    <div class="conversation-details">
                        <div class="conversation-header">
                            <span class="name">Rohan Verma</span>
                            <span class="time">2d ago</span>
                        </div>
                        <div class="conversation-snippet">
                             <p class="last-message">Haha, that's hilarious.</p>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- ===== Column 2: Chat Window ===== -->
        <main class="chat-window">
            <div class="chat-header">
                <div class="contact-info">
                    <img src="./assets/images/profile2.jpg" alt="Priya Sharma">
                    <div>
                        <span class="name">Priya Sharma</span>
                        <span class="status online">Online</span>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="icon-btn"><i class='bx bx-dots-vertical-rounded'></i></button>
                </div>
            </div>

            <div class="message-area">
                <!-- Received Message -->
                <div class="message received">
                    <div class="message-bubble">
                        <p>Hey! Thanks for connecting. I enjoyed reading your profile.</p>
                        <span class="timestamp">10:38 AM</span>
                    </div>
                </div>

                <!-- Sent Message -->
                <div class="message sent">
                     <div class="message-bubble">
                        <p>Hi Priya! Likewise. Your travel photos are amazing. Where was that picture from the mountains taken?</p>
                        <span class="timestamp">10:40 AM</span>
                    </div>
                </div>

                 <!-- Received Message -->
                <div class="message received">
                    <div class="message-bubble">
                        <p>Oh, that was from my trip to the Himalayas last year! It was an incredible experience. Are you into trekking?</p>
                        <span class="timestamp">10:41 AM</span>
                    </div>
                </div>

                 <!-- Sent Message -->
                <div class="message sent">
                     <div class="message-bubble">
                        <p>Definitely! We should talk more about it. Are you free for a quick call sometime this weekend?</p>
                        <span class="timestamp">10:41 AM</span>
                    </div>
                </div>

                <!-- Received Message with unread indicator -->
                <div class="message received">
                    <div class="message-bubble">
                        <p>Sounds great! Looking forward to it.</p>
                        <span class="timestamp">10:42 AM</span>
                    </div>
                </div>
            </div>

            <div class="message-input-area">
                <button class="icon-btn"><i class='bx bx-paperclip'></i></button>
                <input type="text" placeholder="Type a message...">
                <button class="btn-send"><i class='bx bxs-send'></i></button>
            </div>
        </main>

        <!-- ===== Column 3: Profile Preview ===== -->
        <aside class="profile-preview-sidebar">
            <div class="preview-card">
                <img src="./assets/images/profile2.jpg" alt="Priya Sharma" class="preview-pic">
                <h3>Priya Sharma</h3>
                <p class="location"><i class='bx bxs-map'></i> Mumbai, India</p>
                <p class="occupation"><i class='bx bxs-briefcase'></i> Software Engineer</p>
                <hr>
                <div class="shared-interests">
                    <h4>Shared Interests</h4>
                    <span><i class='bx bxs-camera-movie'></i> Movies</span>
                    <span><i class='bx bxs-plane-alt'></i> Travelling</span>
                    <span><i class='bx bxs-dish'></i> Foodie</span>
                </div>
                <a href="./profile.html" class="btn-view-profile">View Full Profile</a>
            </div>
        </aside>

    </div>
     <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <!-- Your Custom JavaScript (Module type is crucial) -->
    <script type="module" src="./js/main.js"></script>
</body>
</html>